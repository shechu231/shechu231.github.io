
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Java网络编程 - Hexo</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="网络编程1.1、概述计算机网络
计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息,"> 
    <meta name="author" content="John Doe"> 
    <link rel="alternative" href="atom.xml" title="Hexo" type="application/atom+xml"> 
    
    
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="Java网络编程 - Hexo"/>
    <meta name="twitter:description" content="网络编程1.1、概述计算机网络
计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息,"/>
    
    
    
    
    <meta property="og:site_name" content="Hexo"/>
    <meta property="og:type" content="object"/>
    <meta property="og:title" content="Java网络编程 - Hexo"/>
    <meta property="og:description" content="网络编程1.1、概述计算机网络
计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息,"/>
    
<link rel="stylesheet" href="/css/diaspora.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">Hexo</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://example.com"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">Java网络编程</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">Java网络编程</h1>
        <div class="stuff">
            <span>三月 26, 2022</span>
            

        </div>
        <div class="content markdown">
            <h2 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h2><h3 id="1-1、概述"><a href="#1-1、概述" class="headerlink" title="1.1、概述"></a>1.1、概述</h3><p>计算机网络</p>
<p>计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统。</p>
<h3 id="1-2、网络通信的要素"><a href="#1-2、网络通信的要素" class="headerlink" title="1.2、网络通信的要素"></a>1.2、网络通信的要素</h3><p>通信双方地址：</p>
<ul>
<li>ip</li>
<li>端口号</li>
</ul>
<p>规则：网络通信的协议</p>
<ul>
<li>TCP</li>
<li>UDP</li>
</ul>
<p>TCP/IP参考模型</p>
<p><img src="https://s2.loli.net/2022/03/26/AQalHX6Ed9wgGhS.png" alt="image-20220326100249239"></p>
<h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><p>ip地址：InetAddress</p>
<ul>
<li>唯一定位一台网络上的计算机</li>
<li>127.0.0.1：本机 localhost</li>
<li>ip地址的分类<ul>
<li>IPV4/IPV6</li>
<li>公网（互联网）-私网（局域网）</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/03/26/So6rksN7we8h5lP.png" alt="image-20220326102705723"></p>
<p>域名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class TestInetAddress &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            InetAddress byName = InetAddress.getByName(&quot;127.0.0.1&quot;);</span><br><span class="line">            System.out.println(byName);</span><br><span class="line">            InetAddress localHost = InetAddress.getLocalHost();</span><br><span class="line">            System.out.println(localHost);</span><br><span class="line">            InetAddress byName1 = InetAddress.getByName(&quot;www.baidu.com&quot;);</span><br><span class="line">            System.out.println(byName1);</span><br><span class="line">            // 常用方法</span><br><span class="line">            System.out.println(byName1.getAddress());</span><br><span class="line">            System.out.println(byName1.getCanonicalHostName()); // 规范的名字</span><br><span class="line">            System.out.println(byName1.getHostAddress()); // 获得主机地址</span><br><span class="line">            System.out.println(byName1.getHostName()); // 获得电脑名字</span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h1><h3 id="端口表示计算机上的一个程序的进程"><a href="#端口表示计算机上的一个程序的进程" class="headerlink" title="端口表示计算机上的一个程序的进程"></a>端口表示计算机上的一个程序的进程</h3><p>不同的进程有不同的端口号</p>
<ul>
<li>被规定0-65535<br>端口的分类</li>
</ul>
<h4 id="公有端口0-1023"><a href="#公有端口0-1023" class="headerlink" title="公有端口0-1023"></a>公有端口0-1023</h4><p>​    Http:80<br>​    Https:443<br>​    Ftp:21<br>​    Telnet:23<br>​    远程连接：22</p>
<h4 id="程序注册端口：1024-49151，分配给用户或者程序"><a href="#程序注册端口：1024-49151，分配给用户或者程序" class="headerlink" title="程序注册端口：1024-49151，分配给用户或者程序"></a>程序注册端口：1024-49151，分配给用户或者程序</h4><p>​    Tomcat：8080<br>​    MySql：3306<br>​    Oracle：1521<br>​    动态，私有：49152-65535</p>
<h4 id="动态，私有：49152-65535"><a href="#动态，私有：49152-65535" class="headerlink" title="动态，私有：49152-65535"></a>动态，私有：49152-65535</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano # 查看所有端口</span><br><span class="line">netstat -ano|findstr &quot;端口号&quot;  # 查看指定的端口</span><br><span class="line">tasklist|findstr &quot;8696&quot;  # 查看指定端口的进程</span><br></pre></td></tr></table></figure>

<h3 id="通信协议"><a href="#通信协议" class="headerlink" title="通信协议"></a>通信协议</h3><p>协议：约定，就好比我们说的普通话</p>
<p>网络通信协议：速率，传输码率，代码结构，传输控制…</p>
<p>重要：</p>
<ul>
<li>TCP：用户传输协议</li>
<li>UDP：用户数据报协议</li>
</ul>
<p><strong>TCP/IP协议簇，实际上是一组协议</strong></p>
<p><strong>TCP的三次握手和四次挥手</strong></p>
<p>1）Client：嘿，李四，是我，听到了吗？</p>
<p>2）Server：我听到了，你能听到我的吗?</p>
<p>3）Client：好的，我们互相都能听到对方的话，我们的通信可以开始了。</p>
<p><strong>TCP的三次握手和四次挥手</strong></p>
<p>1）Client：嘿，李四，是我，听到了吗？</p>
<p>2）Server：我听到了，你能听到我的吗?</p>
<p>3）Client：好的，我们互相都能听到对方的话，我们的通信可以开始了。<br><img src="https://s2.loli.net/2022/03/26/dk6TQZiNfq4Xta1.png" alt="在这里插入图片描述"></p>
<p>1）Client：我所有东西都说完了</p>
<p>2）Server：我已经全部听到了，但是等等我，我还没说完</p>
<p>3）Server：好了，我已经说完了</p>
<p>4）Client：好的，那我们的通信结束<br><img src="https://s2.loli.net/2022/03/26/SpN3WrsUYIefV6z.png" alt="在这里插入图片描述"></p>
<h3 id="1-6、TCP"><a href="#1-6、TCP" class="headerlink" title="1.6、TCP"></a>1.6、TCP</h3><ul>
<li>客户端<ul>
<li>连接服务器Socket</li>
<li>发送消息</li>
</ul>
</li>
<li>服务端<ul>
<li>建立服务的端口ServerSocket</li>
<li>等待用户的连接 accept</li>
<li>接收用户的消息</li>
</ul>
</li>
</ul>
<h1 id="TcpClient"><a href="#TcpClient" class="headerlink" title="TcpClient"></a>TcpClient</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class TcpClient &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Socket socket = null;</span><br><span class="line">        OutputStream outputStream = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            InetAddress serverIP = InetAddress.getByName(&quot;127.0.0.1&quot;);</span><br><span class="line">            int port = 9999;</span><br><span class="line">            socket = new Socket(serverIP, port);</span><br><span class="line">            outputStream = socket.getOutputStream();</span><br><span class="line">            outputStream.write(&quot;你好，我的世界&quot;.getBytes());</span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            if(socket!=null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(outputStream!=null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    outputStream.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="TcpServer"><a href="#TcpServer" class="headerlink" title="TcpServer"></a>TcpServer</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">public class TcpServer &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ServerSocket serverSocket = null;</span><br><span class="line">        Socket socket = null;</span><br><span class="line">        InputStream is = null;</span><br><span class="line">        ByteArrayOutputStream baos =null;</span><br><span class="line">        try &#123;</span><br><span class="line"></span><br><span class="line">            serverSocket = new ServerSocket(9999);</span><br><span class="line">            while (true)&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            socket = serverSocket.accept();</span><br><span class="line">            is = socket.getInputStream();</span><br><span class="line">            /*byte[] buffer = new byte[5];</span><br><span class="line">            int len;</span><br><span class="line">            while ((len=is.read(buffer))!=-1)&#123;</span><br><span class="line">                String msg = new String(buffer,0,len);</span><br><span class="line">                System.out.println(msg);</span><br><span class="line">            &#125;*/</span><br><span class="line">            //管道流</span><br><span class="line">            baos = new ByteArrayOutputStream();</span><br><span class="line">            byte[] buffer = new byte[5];</span><br><span class="line">            int len;</span><br><span class="line">            while ((len=is.read(buffer))!=-1)&#123;</span><br><span class="line">                baos.write(buffer,0,len);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(baos.toString());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            if(baos!=null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    baos.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(is!=null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(socket!=null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(serverSocket!=null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    serverSocket.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结论：服务器设置循环监听，启动一次即可。客户端每次发送的内容会被服务器接收打印。</p>
<h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><h3 id="TcpUploadClient："><a href="#TcpUploadClient：" class="headerlink" title="TcpUploadClient："></a>TcpUploadClient：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public class TcpUploadClient &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        Socket socket = new Socket(InetAddress.getByName(&quot;127.0.0.1&quot;).getHostAddress(),9000);</span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line"></span><br><span class="line">        FileInputStream fis = new FileInputStream(new File(&quot;D:\\upload.jpg&quot;));</span><br><span class="line">        byte[] buffer = new byte[1024];</span><br><span class="line">        int len;</span><br><span class="line">        while ((len=fis.read(buffer))!=-1)&#123;</span><br><span class="line">            os.write(buffer,0,len);</span><br><span class="line">        &#125;</span><br><span class="line">        //通知服务器，我已经结束了</span><br><span class="line">        socket.shutdownOutput();//我已经传输完了</span><br><span class="line"></span><br><span class="line">        //确定服务器接收完毕，才能够断开连接</span><br><span class="line">        InputStream inputStream = socket.getInputStream();</span><br><span class="line">        //String byte[]</span><br><span class="line">        ByteArrayOutputStream baos = new ByteArrayOutputStream();</span><br><span class="line">        byte[] buffer2 = new byte[1024];</span><br><span class="line">        int len2;</span><br><span class="line">        while ((len2=inputStream.read(buffer2))!=-1)&#123;</span><br><span class="line">            baos.write(buffer2,0,len2);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(baos.toString());</span><br><span class="line"></span><br><span class="line">        //关闭文档资源</span><br><span class="line">        inputStream.close();</span><br><span class="line">        fis.close();</span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="TcpUploadServer："><a href="#TcpUploadServer：" class="headerlink" title="TcpUploadServer："></a>TcpUploadServer：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class TcpUploadServer &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        //1.创建服务</span><br><span class="line">        ServerSocket serverSocket = new ServerSocket(9000);</span><br><span class="line">        //2.监听客户端连接</span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line">        //阻塞式监听，会一直等待客户端连接</span><br><span class="line">        //3.获取输入流</span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        //4.文件输出</span><br><span class="line">        FileOutputStream fos = new FileOutputStream(new File(&quot;receive.jpg&quot;));</span><br><span class="line">        byte[] buffer = new byte[1024];</span><br><span class="line">        int len;</span><br><span class="line">        while ((len = is.read(buffer))!=-1)&#123;</span><br><span class="line">            fos.write(buffer,0,len);</span><br><span class="line">        &#125;</span><br><span class="line">        //通知客户端接收完毕</span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        os.write(&quot;我接受完毕了，你可以断开了&quot;.getBytes());</span><br><span class="line">        //关闭文件</span><br><span class="line">        fos.close();</span><br><span class="line">        is.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h1><p>发短信：需用连接，但是要知道对方的地址</p>
<h2 id="UdpClientDemo01"><a href="#UdpClientDemo01" class="headerlink" title="UdpClientDemo01"></a>UdpClientDemo01</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class UdpClientDemo01 &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        DatagramSocket socket = new DatagramSocket();</span><br><span class="line"></span><br><span class="line">        //建个包</span><br><span class="line">        String msg = &quot;你好啊，服务器！&quot;;</span><br><span class="line">        InetAddress localhost = InetAddress.getByName(&quot;localhost&quot;);</span><br><span class="line">        int port = 9090;</span><br><span class="line">        //数据，数据长度起始，要发送给谁</span><br><span class="line">        DatagramPacket packet = new DatagramPacket(msg.getBytes(),0,msg.getBytes().length,localhost,port);</span><br><span class="line">        //3.发送包</span><br><span class="line">        socket.send(packet);</span><br><span class="line">        //4.关闭流</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="UdpServerDemo02"><a href="#UdpServerDemo02" class="headerlink" title="UdpServerDemo02"></a>UdpServerDemo02</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class UdpServerDemo02 &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        //开放端口</span><br><span class="line">        DatagramSocket socket = new DatagramSocket(9090);</span><br><span class="line">        //接收数据</span><br><span class="line">        byte[] buffer = new byte[1024];</span><br><span class="line">        DatagramPacket packet = new DatagramPacket(buffer,0,buffer.length);//接收</span><br><span class="line">        socket.receive(packet);</span><br><span class="line">        System.out.println(packet.getAddress().getHostAddress());</span><br><span class="line">        System.out.println(new String(packet.getData(),0, packet.getLength()));</span><br><span class="line"></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结论：UDP没有客户端和服务器的概念，可以互相发送。而TCP只能由客户端往服务器发送。</p>
<p><strong>使用UDP实现发送消息</strong></p>
<h1 id="聊天案例"><a href="#聊天案例" class="headerlink" title="聊天案例"></a>聊天案例</h1><h2 id="UdpSenderDemo01："><a href="#UdpSenderDemo01：" class="headerlink" title="UdpSenderDemo01："></a>UdpSenderDemo01：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class UdpSenderDemo01 &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        DatagramSocket socket = new DatagramSocket(8888);</span><br><span class="line">        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));</span><br><span class="line">        while (true)&#123;</span><br><span class="line">            String data = reader.readLine();</span><br><span class="line">            byte[] datas = data.getBytes();</span><br><span class="line">            DatagramPacket packet = new DatagramPacket(datas,0,datas.length,new InetSocketAddress(&quot;127.0.0.1&quot;,6666));</span><br><span class="line">            socket.send(packet);</span><br><span class="line">            if (data.equals(&quot;bye&quot;))&#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="UdpReceiveDemo01"><a href="#UdpReceiveDemo01" class="headerlink" title="UdpReceiveDemo01"></a>UdpReceiveDemo01</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class UdpReceiveDemo01 &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        DatagramSocket socket = new DatagramSocket(6666);</span><br><span class="line">        // 准备接收包裹</span><br><span class="line">        while (true)&#123;</span><br><span class="line">            byte[] container = new byte[1024];</span><br><span class="line">            DatagramPacket packet = new DatagramPacket(container, 0, container.length);</span><br><span class="line">            socket.receive(packet); // 阻塞式接收包裹</span><br><span class="line">            // 断开连接</span><br><span class="line">            byte[] data = packet.getData();</span><br><span class="line">            String receiveData = new String(data,0,data.length);</span><br><span class="line">            System.out.println(receiveData);</span><br><span class="line">            if (receiveData.equals(&quot;bye&quot;))&#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结论：可以实现持续发送和持续接收</p>
<p><strong>在线咨询</strong>：两人同时持续发送，持续接收</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">public class TalkSend implements Runnable&#123;</span><br><span class="line">    DatagramSocket socket = null;</span><br><span class="line">    BufferedReader reader = null;</span><br><span class="line"></span><br><span class="line">    private int fromPort;</span><br><span class="line">    private String toIp;</span><br><span class="line">    private int toPort;</span><br><span class="line">    public TalkSend(int fromPort, String toIp, int toPort) &#123;</span><br><span class="line">        this.fromPort = fromPort;</span><br><span class="line">        this.toIp = toIp;</span><br><span class="line">        this.toPort = toPort;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            socket = new DatagramSocket(fromPort);</span><br><span class="line">            reader = new BufferedReader(new InputStreamReader(System.in));</span><br><span class="line">        &#125; catch (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        while (true)&#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                String data = reader.readLine();</span><br><span class="line">                byte[] datas = data.getBytes();</span><br><span class="line">                DatagramPacket packet = new DatagramPacket(datas,0,datas.length,new InetSocketAddress(this.toIp,this.toPort));</span><br><span class="line">                socket.send(packet);</span><br><span class="line">                if (data.equals(&quot;bye&quot;))&#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TalkReceive implements Runnable&#123;</span><br><span class="line">    DatagramSocket socket = null;</span><br><span class="line">    private int port;</span><br><span class="line">    private String msgFrom;</span><br><span class="line"></span><br><span class="line">    public TalkReceive(int port,String msgFrom) &#123;</span><br><span class="line">        this.port = port;</span><br><span class="line">        this.msgFrom = msgFrom;</span><br><span class="line">        try &#123;</span><br><span class="line">            socket = new DatagramSocket(port);</span><br><span class="line">        &#125; catch (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        // 准备接收包裹</span><br><span class="line">        while (true)&#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                byte[] container = new byte[1024];</span><br><span class="line">                DatagramPacket packet = new DatagramPacket(container, 0, container.length);</span><br><span class="line">                socket.receive(packet); // 阻塞式接收包裹</span><br><span class="line">                // 断开连接</span><br><span class="line">                byte[] data = packet.getData();</span><br><span class="line">                String receiveData = new String(data,0,data.length);</span><br><span class="line">                System.out.println(msgFrom+&quot;:&quot;+receiveData);</span><br><span class="line">                if (receiveData.equals(&quot;bye&quot;))&#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TalkStudent &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 开启两个线程</span><br><span class="line">        new Thread(new TalkSend(7777,&quot;127.0.0.1&quot;,9999)).start();</span><br><span class="line">        new Thread(new TalkReceive(8888,&quot;老师&quot;)).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TalkTeacher &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 开启两个线程</span><br><span class="line">        new Thread(new TalkSend(5555,&quot;127.0.0.1&quot;,8888)).start();</span><br><span class="line">        new Thread(new TalkReceive(9999,&quot;学生&quot;)).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>统一资源定位符：定位互联网上的某一个资源</p>
<h4 id="网络资源下载"><a href="#网络资源下载" class="headerlink" title="网络资源下载"></a>网络资源下载</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">协议://ip地址:端口/项目名/资源  # http://127.0.0.1:8080/MrXie/Security.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class UrlTest &#123;</span><br><span class="line">    // http://127.0.0.1:8080/MrXie/Security.txt</span><br><span class="line">    public static void main(String[] args) throws MalformedURLException &#123;</span><br><span class="line">        URL url = new URL(&quot;http://127.0.0.1:8080/MrXie/Security.txt&quot;);</span><br><span class="line">        System.out.println(url.getProtocol());  // 协议</span><br><span class="line">        System.out.println(url.getHost());  // 主机</span><br><span class="line">        System.out.println(url.getPort());  // 端口</span><br><span class="line">        System.out.println(url.getPath());   // 文件</span><br><span class="line">        System.out.println(url.getFile());  // 文件全路径</span><br><span class="line">        System.out.println(url.getQuery());  // 参数</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">结果</span><br><span class="line">http</span><br><span class="line">127.0.0.1</span><br><span class="line">8080</span><br><span class="line">/MrXie/Security.txt</span><br><span class="line">/MrXie/Security.txt</span><br><span class="line">null</span><br></pre></td></tr></table></figure>

<p><strong>从网络上下载资源</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class UrlDown &#123;</span><br><span class="line">    public static void main(String[] args) throws IOException &#123;</span><br><span class="line">        // 1.下载地址</span><br><span class="line">        URL url = new URL(&quot;http://127.0.0.1:8080/MrXie/Security.txt&quot;);</span><br><span class="line">        // 2.连接到这个资源  HTTP</span><br><span class="line">        HttpURLConnection urlConnection = (HttpURLConnection)url.openConnection();</span><br><span class="line">        InputStream inputStream = urlConnection.getInputStream();</span><br><span class="line">        FileOutputStream fos = new FileOutputStream(&quot;SecurityFile.txt&quot;);</span><br><span class="line">        byte[] buffer = new byte[1024];</span><br><span class="line">        int len;</span><br><span class="line">        while ((len = inputStream.read(buffer))!= -1)&#123;</span><br><span class="line">            fos.write(buffer,0,len);</span><br><span class="line">        &#125;</span><br><span class="line">        fos.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">        urlConnection.disconnect();  // 断开连接</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将我Tomcat服务器上的资源下载到了本地。<strong>url可以写网络的资源连接</strong>，都可以下载。</p>
<h1 id="手写Web服务器"><a href="#手写Web服务器" class="headerlink" title="手写Web服务器"></a>手写Web服务器</h1><h4 id="处理请求数据信息"><a href="#处理请求数据信息" class="headerlink" title="处理请求数据信息"></a>处理请求数据信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.webserver;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"></span><br><span class="line">public class Server01 &#123;</span><br><span class="line"></span><br><span class="line">    private ServerSocket serverSocket;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Server01 server = new Server01();</span><br><span class="line">        server.start();</span><br><span class="line">        server.receive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //启动服务器</span><br><span class="line">    public void start()&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            serverSocket = new ServerSocket(8888);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(&quot;服务器启动失败&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //接受连接处理</span><br><span class="line">    public void receive()&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Socket client = serverSocket.accept();</span><br><span class="line">            System.out.println(&quot;一个客户端建立连接&quot;);</span><br><span class="line">            InputStream is = client.getInputStream();</span><br><span class="line">            int len = 0;</span><br><span class="line">            byte[] buffer = new byte[1024*1024];</span><br><span class="line">            //管道流</span><br><span class="line">            len = is.read(buffer);</span><br><span class="line">            System.out.println(new String(buffer,0,len));</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(&quot;客户端错误&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //停止</span><br><span class="line">    public void stop()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="回复响应数据"><a href="#回复响应数据" class="headerlink" title="回复响应数据"></a>回复响应数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.webserver;</span><br><span class="line"></span><br><span class="line">import java.io.BufferedWriter;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.io.OutputStreamWriter;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"></span><br><span class="line">public class Server02 &#123;</span><br><span class="line"></span><br><span class="line">    private ServerSocket serverSocket;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Server02 server = new Server02();</span><br><span class="line">        server.start();</span><br><span class="line">        server.receive();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //启动服务器</span><br><span class="line">    public void start()&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            serverSocket = new ServerSocket(8888);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(&quot;服务器启动失败&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //接受连接处理</span><br><span class="line">    public void receive()&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            System.out.println(&quot;你好&quot;);</span><br><span class="line">            Socket client = serverSocket.accept();</span><br><span class="line">            System.out.println(&quot;一个客户端建立连接2&quot;);</span><br><span class="line">            InputStream is = client.getInputStream();</span><br><span class="line">            int len = 0;</span><br><span class="line">            byte[] buffer = new byte[1024*1024];</span><br><span class="line">            //管道流</span><br><span class="line">            len = is.read(buffer);</span><br><span class="line">            System.out.println(new String(buffer,0,len));</span><br><span class="line"></span><br><span class="line">            StringBuilder content = new StringBuilder();</span><br><span class="line">            content.append(&quot;&lt;div&gt;helloworld&lt;/div&gt;&quot;);</span><br><span class="line">            int size = content.length();</span><br><span class="line">            StringBuilder responseInfo = new StringBuilder();</span><br><span class="line">            String blank = &quot; &quot;;</span><br><span class="line">            responseInfo.append(&quot;HTTP/1.1 200 OK\n&quot;);</span><br><span class="line">//            responseInfo.append(&quot;Content-type:text/html&quot;).append(CRLF);</span><br><span class="line">            responseInfo.append(&quot;content-length:&quot;+size+&quot;\n\n&quot;);</span><br><span class="line">            //正文</span><br><span class="line">            responseInfo.append(content);</span><br><span class="line">//            写到客户端</span><br><span class="line">            BufferedWriter bw=new BufferedWriter(new OutputStreamWriter(client.getOutputStream()));</span><br><span class="line">            bw.write(responseInfo.toString());</span><br><span class="line">            bw.flush();</span><br><span class="line">            //返回</span><br><span class="line">            //1.响应行:HTTP/1.1 200 OK</span><br><span class="line">            //2.响应头(最后一行存在空行)</span><br><span class="line">            /*</span><br><span class="line">            Content-type:text/html</span><br><span class="line">            Content-length:39725426</span><br><span class="line">             */</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(&quot;客户端错误&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //停止</span><br><span class="line">    public void stop()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="封装Request请求"><a href="#封装Request请求" class="headerlink" title="封装Request请求"></a>封装Request请求</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.webserver;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"></span><br><span class="line">public class Request &#123;</span><br><span class="line">    //协议信息</span><br><span class="line">    public String requestInfo;</span><br><span class="line"></span><br><span class="line">    //请求方式</span><br><span class="line">    public String method;</span><br><span class="line"></span><br><span class="line">    //请求URL</span><br><span class="line">    public String url;</span><br><span class="line">    //请求字符串</span><br><span class="line">    public String queryStr;</span><br><span class="line"></span><br><span class="line">    //获取输入流</span><br><span class="line">    public Request(InputStream inputStream) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            int len = 0;</span><br><span class="line">            byte[] buffer = new byte[1024*1024];</span><br><span class="line">            //管道流</span><br><span class="line">            len = inputStream.read(buffer);</span><br><span class="line">            this.requestInfo = new String(buffer,0,len);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Request(Socket socket) throws IOException &#123;</span><br><span class="line">        this(socket.getInputStream());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //分解字符串</span><br><span class="line">    private void parseRequestInfo()&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;--------分解-------------&quot;);</span><br><span class="line">        //获取请求协议</span><br><span class="line">        this.method = this.requestInfo.substring(0,this.requestInfo.indexOf(&quot;/&quot;)).toLowerCase();</span><br><span class="line">        this.url = this.requestInfo.substring(this.requestInfo.indexOf(&quot;/&quot;)+1,this.requestInfo.indexOf(&quot;HTTP/&quot;));</span><br><span class="line">        int queryIdx = this.url.indexOf(&quot;?&quot;);</span><br><span class="line">        if(queryIdx&gt;0)&#123;</span><br><span class="line">            String[] urlArray = this.url.split(&quot;\\?&quot;);</span><br><span class="line">            this.url = urlArray[0];</span><br><span class="line">            this.queryStr=urlArray[1];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //get在url中获取，post可能在请求体中</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="解析xml文件"><a href="#解析xml文件" class="headerlink" title="解析xml文件"></a>解析xml文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.webserver;</span><br><span class="line"></span><br><span class="line">import org.xml.sax.Attributes;</span><br><span class="line">import org.xml.sax.SAXException;</span><br><span class="line">import org.xml.sax.helpers.DefaultHandler;</span><br><span class="line"></span><br><span class="line">import javax.xml.parsers.ParserConfigurationException;</span><br><span class="line">import javax.xml.parsers.SAXParser;</span><br><span class="line">import javax.xml.parsers.SAXParserFactory;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class XmlTest01 &#123;</span><br><span class="line">    public static void main(String[] args) throws IOException, SAXException &#123;</span><br><span class="line">        //获取解析工厂</span><br><span class="line">        SAXParserFactory factory = SAXParserFactory.newInstance();</span><br><span class="line">        //获取解析器</span><br><span class="line">        SAXParser saxParser =null;</span><br><span class="line">        try &#123;</span><br><span class="line">            saxParser = factory.newSAXParser();</span><br><span class="line">        &#125; catch (ParserConfigurationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SAXException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        //加载文档Document注册处理器</span><br><span class="line">        //编写处理器</span><br><span class="line">        PersonHandler handler = new PersonHandler();</span><br><span class="line">        saxParser.parse(Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;com/atguigu/webserver/p.xml&quot;),handler);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class PersonHandler extends DefaultHandler&#123;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException &#123;</span><br><span class="line">        System.out.println(&quot;开始标签&quot;);</span><br><span class="line">        System.out.println(qName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void characters(char[] ch, int start, int length) throws SAXException &#123;</span><br><span class="line">        String contents = new String(ch,start,length);</span><br><span class="line">        System.out.println(&quot;内容为&quot;+contents);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void endElement(String uri, String localName, String qName) throws SAXException &#123;</span><br><span class="line">        System.out.println(&quot;结束标签:&quot;);</span><br><span class="line">        System.out.println(qName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>第二种</p>
<p>导入依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.dom4j&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;dom4j&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;2.1.3&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>解析</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public void readXml() throws Exception&#123;</span><br><span class="line">      //1.创建Reader对象</span><br><span class="line">       SAXReader saxReader = new SAXReader();</span><br><span class="line">        //2.加载xml</span><br><span class="line">       Document document = saxReader.read(new File(&quot;D:/1.xml&quot;));</span><br><span class="line">       //3.获取根节点</span><br><span class="line">       Element rootElement = document.getRootElement();</span><br><span class="line">       // rootElement.elements()获取根节点下所有的节点，</span><br><span class="line">       List&lt;Element&gt; elements = rootElement.elements();</span><br><span class="line">       //获取节点book1下属性为id的值 003</span><br><span class="line">      rootElement.element(&quot;book1&quot;).attribute(&quot;id&quot;).getValue()；</span><br><span class="line">      </span><br><span class="line">       for (Element element : elements) &#123;</span><br><span class="line">           //依次遍历根节点下的节点  book book book1</span><br><span class="line">           element.getName();</span><br><span class="line">           //依次遍历根节点下的节点对应属性为id的值 001 002 003</span><br><span class="line">           System.out.println(element.attribute(&quot;id&quot;).getValue());</span><br><span class="line">           System.out.println(&quot;----------------------------&quot;);</span><br><span class="line">           //同样道理 继续依次获取该节点下的节点 </span><br><span class="line">           List&lt;Element&gt; child = element.elements();</span><br><span class="line">           for (Element element1 : child) &#123;</span><br><span class="line">               /依次/获取子节点  id title author   、title  author、title author  </span><br><span class="line">                element1.getName();</span><br><span class="line">                //依次获取子节点的值 9  Harry Potter  J K. Rowling、.......</span><br><span class="line">               System.out.println(element1.getText());</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       // 获取第二个节点book的属性为id的值 002</span><br><span class="line">       elements.get(1).attribute(&quot;id&quot;).getValue();</span><br><span class="line">       // 获取根节点下第二个节点book所有节点</span><br><span class="line">       List&lt;Element&gt; elements1 = elements.get(1).elements();</span><br><span class="line">       //获取根节点下第二个节点book节点下的第二个节点author的值 Erik T. Ray</span><br><span class="line">        elements.get(1).elements().get(1).getText();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>第三种</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//建立DocumentBuilderFactor，用于获得DocumentBuilder对象：</span><br><span class="line">        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();</span><br><span class="line">        //建立DocumentBuidler;</span><br><span class="line">        DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();</span><br><span class="line">        //import org.w3c.dom.Document;</span><br><span class="line">        Document document = documentBuilder.parse(new File(&quot;D:/1.xml&quot;));</span><br><span class="line">        NodeList node = document.getElementsByTagName(&quot;linkman&quot;);</span><br><span class="line">        for (int i = 0; i &lt; node.getLength(); i++) &#123;</span><br><span class="line">            Element e = (Element)node.item(i);</span><br><span class="line">            String name = e.getElementsByTagName(&quot;name&quot;).item(0).getFirstChild().getNodeValue();</span><br><span class="line">            String email = e.getElementsByTagName(&quot;email&quot;).item(0).getFirstChild().getNodeValue();</span><br><span class="line">            System.out.println(name);</span><br><span class="line">            System.out.println(email);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>


            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title="0" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                        
                            <li title="1" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link"
		data-enable="false"
        data-ae="false"
        data-ci=""
        data-cs=""
        data-r=""
        data-o=""
        data-a=""
        data-d="false"
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
