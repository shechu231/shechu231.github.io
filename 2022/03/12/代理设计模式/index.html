
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>代理设计模式 - Hexo</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="1.介绍两个动态代理首先
然后


项目结构
2.cglib和JDK入门代码测试编辑Service接口12345package com.jt.service;public interface Use,"> 
    <meta name="author" content="John Doe"> 
    <link rel="alternative" href="atom.xml" title="Hexo" type="application/atom+xml"> 
    
    
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="代理设计模式 - Hexo"/>
    <meta name="twitter:description" content="1.介绍两个动态代理首先
然后


项目结构
2.cglib和JDK入门代码测试编辑Service接口12345package com.jt.service;public interface Use,"/>
    
    
    
    
    <meta property="og:site_name" content="Hexo"/>
    <meta property="og:type" content="object"/>
    <meta property="og:title" content="代理设计模式 - Hexo"/>
    <meta property="og:description" content="1.介绍两个动态代理首先
然后


项目结构
2.cglib和JDK入门代码测试编辑Service接口12345package com.jt.service;public interface Use,"/>
    
<link rel="stylesheet" href="/css/diaspora.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">Hexo</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://example.com"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">代理设计模式</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">代理设计模式</h1>
        <div class="stuff">
            <span>三月 12, 2022</span>
            

        </div>
        <div class="content markdown">
            <h1 id="1-介绍两个动态代理"><a href="#1-介绍两个动态代理" class="headerlink" title="1.介绍两个动态代理"></a>1.介绍两个动态代理</h1><h4 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h4><p><img src="https://s2.loli.net/2022/03/12/YJZGzu3bHTF4tyv.png" alt="image-20220312150315457"></p>
<p>然后</p>
<p><img src="https://s2.loli.net/2022/03/12/mauhGQ6eL7JUY5c.png" alt="image-20220312150405249"></p>
<p><img src="https://s2.loli.net/2022/03/12/9ZvqPHAs5RWGceT.png" alt="image-20220312150503570"></p>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p><img src="https://s2.loli.net/2022/03/12/EYQelfX5HJ9hqjy.png" alt="image-20220312150744992"></p>
<h1 id="2-cglib和JDK"><a href="#2-cglib和JDK" class="headerlink" title="2.cglib和JDK"></a>2.cglib和JDK</h1><h4 id="入门代码测试"><a href="#入门代码测试" class="headerlink" title="入门代码测试"></a>入门代码测试</h4><h4 id="编辑Service接口"><a href="#编辑Service接口" class="headerlink" title="编辑Service接口"></a>编辑Service接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jt.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="编辑ServiceImpl实现类"><a href="#编辑ServiceImpl实现类" class="headerlink" title="编辑ServiceImpl实现类"></a>编辑ServiceImpl实现类</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class UserServiceImpl implements UserService&#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    UserMapper userMapper;</span><br><span class="line">    @Override</span><br><span class="line">    public void addUser() &#123;</span><br><span class="line">        userMapper.addUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写UserMapper类"><a href="#编写UserMapper类" class="headerlink" title="编写UserMapper类"></a>编写UserMapper类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.mapper;</span><br><span class="line"></span><br><span class="line">public interface UserMapper &#123;</span><br><span class="line">    public void addUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写UserMapperImpl类"><a href="#编写UserMapperImpl类" class="headerlink" title="编写UserMapperImpl类"></a>编写UserMapperImpl类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.mapper;</span><br><span class="line">import org.springframework.stereotype.Repository;</span><br><span class="line">@Repository</span><br><span class="line">public class UserMapperImpl implements UserMapper&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void addUser() &#123;</span><br><span class="line">        System.out.println(&quot;你好&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="编写UserController类"><a href="#编写UserController类" class="headerlink" title="编写UserController类"></a>编写UserController类</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.controller;</span><br><span class="line"></span><br><span class="line">import com.jt.service.UserService;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">public class UserController &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    UserService userService;</span><br><span class="line">    public void addUser()&#123;</span><br><span class="line">        userService.addUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写动态代理类CGlibProxy"><a href="#编写动态代理类CGlibProxy" class="headerlink" title="编写动态代理类CGlibProxy"></a>编写动态代理类CGlibProxy</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.proxy;</span><br><span class="line"></span><br><span class="line">import org.springframework.cglib.proxy.Enhancer;</span><br><span class="line">import org.springframework.cglib.proxy.MethodInterceptor;</span><br><span class="line">import org.springframework.cglib.proxy.MethodProxy;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line">public class CGlibProxy &#123;</span><br><span class="line">    public static Object getProxy(Object target)&#123;</span><br><span class="line">        //1.创建增强器对象</span><br><span class="line">        Enhancer enhancer = new Enhancer();</span><br><span class="line">        //2.设定父级 目标对象</span><br><span class="line">        enhancer.setSuperclass(target.getClass());</span><br><span class="line">        //3.定义回调方法 代理对象执行目标方法时调用</span><br><span class="line">        enhancer.setCallback(getMethodInterceptor(target));</span><br><span class="line">        //4.创建代理对象</span><br><span class="line">        return enhancer.create();</span><br><span class="line">    &#125;</span><br><span class="line">    public static MethodInterceptor getMethodInterceptor(Object target)&#123;</span><br><span class="line"></span><br><span class="line">        return new MethodInterceptor() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123;</span><br><span class="line">                System.out.println(&quot;CGlibProxy事务开始&quot;);</span><br><span class="line">                //执行目标方法</span><br><span class="line">                Object result= method.invoke(target,objects);</span><br><span class="line">                System.out.println(&quot;CGlibProxy事务提交&quot;);</span><br><span class="line"></span><br><span class="line">                return result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="编写测试类CGLIB代理"><a href="#编写测试类CGLIB代理" class="headerlink" title="编写测试类CGLIB代理"></a>编写测试类CGLIB代理</h4><p><img src="https://s2.loli.net/2022/03/12/VNPy73TLvAs2lqj.png" alt="image-20220312151143810"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Springdemo8ProxyApplicationTests &#123;</span><br><span class="line">    @Test</span><br><span class="line">    void contextLoads() &#123;</span><br><span class="line">        ApplicationContext context = new AnnotationConfigApplicationContext(config.class);</span><br><span class="line">        UserController userController = context.getBean(UserController.class);</span><br><span class="line">        UserController proxy = (UserController) CGlibProxy.getProxy(userController);</span><br><span class="line">        proxy.addUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="编写测试类JDK代理"><a href="#编写测试类JDK代理" class="headerlink" title="编写测试类JDK代理"></a>编写测试类JDK代理</h2><h4 id="JDKProxy代理类"><a href="#JDKProxy代理类" class="headerlink" title="JDKProxy代理类"></a>JDKProxy代理类</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public class JDKProxy &#123;</span><br><span class="line">    //传入target目标对象获取代理对象的</span><br><span class="line">    //利用代理对象 实现方法拓展</span><br><span class="line">    public static Object getProxy(Object target)&#123;</span><br><span class="line">        //1.获取类加载器</span><br><span class="line">        ClassLoader classLoader = target.getClass().getClassLoader();</span><br><span class="line">        //2.获取接口数组类型</span><br><span class="line">        Class[] interfaces = target.getClass().getInterfaces();</span><br><span class="line">        //3.代理对象执行方法时的回调方法</span><br><span class="line">        return Proxy.newProxyInstance(classLoader, interfaces, invocationHandler(target));</span><br><span class="line">    &#125;</span><br><span class="line">    public static InvocationHandler invocationHandler(Object target)&#123;</span><br><span class="line">        return new InvocationHandler() &#123;</span><br><span class="line">            /**</span><br><span class="line">             *</span><br><span class="line">             * @param proxy</span><br><span class="line">             * @param method</span><br><span class="line">             * @param args</span><br><span class="line">             * @return</span><br><span class="line">             * @throws Throwable</span><br><span class="line">             */</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line">                System.out.println(&quot;事务开始&quot;);</span><br><span class="line">                Object invoke = method.invoke(target, args);</span><br><span class="line">                System.out.println(&quot;事务提交&quot;);</span><br><span class="line"></span><br><span class="line">                return invoke;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="测试类contextJDK："><a href="#测试类contextJDK：" class="headerlink" title="测试类contextJDK："></a>测试类contextJDK：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    void contextJDK()&#123;</span><br><span class="line"></span><br><span class="line">        ApplicationContext context = new AnnotationConfigApplicationContext(config.class);</span><br><span class="line">        UserController userController = context.getBean(UserController.class);</span><br><span class="line">        UserController proxy = (UserController) JDKProxy.getProxy(userController);</span><br><span class="line">        proxy.addUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>报错</p>
</blockquote>
<p><img src="https://s2.loli.net/2022/03/12/bEahZwfqAHxSlBY.png" alt="image-20220312151958896"></p>
<p>原因，没有实现接口对象。</p>
<h2 id="修改测试类"><a href="#修改测试类" class="headerlink" title="修改测试类"></a>修改测试类</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    void contextJDK()&#123;</span><br><span class="line">        ApplicationContext context = new AnnotationConfigApplicationContext(config.class);</span><br><span class="line">        UserService userService = context.getBean(UserService.class);</span><br><span class="line">        UserService proxy =(UserService) JDKProxy.getProxy(userService);</span><br><span class="line">        proxy.addUser();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>jdk代理: 要求必须有/实现<strong>接口</strong>. 如果没有接口,则JDK代理不能正常执行.<br>cglib代理: 要求被代理者有无接口都可以. <strong>代理对象是目标对象的子类</strong> 重写子类方法</p>
<h2 id="关于JDK代理和CGlib代理总结-高程-架构"><a href="#关于JDK代理和CGlib代理总结-高程-架构" class="headerlink" title="关于JDK代理和CGlib代理总结(高程/架构)!!!"></a>关于JDK代理和CGlib代理总结(高程/架构)!!!</h2><p><strong>1. JDK要求必须有或者实现接口, cglib有无接口都可以创建代理对象.代理对象是目标对象的子类</strong></p>
<ol start="2">
<li><p>JDK代理工具API: Proxy.newProxyInstance(类加载器,接口数组,invocationHandler接口)</p>
</li>
<li><p>CGlib代理工具API: Enhancer 增强器对象 获取代理对象 enhancer.create(); 回调接口MethodInterceptor接口</p>
</li>
<li><p>JDK中执行目标方法<br>-method.invoke(target,args);<br>CGlib中执行目标方法<br>-method.invoke(target,args);</p>
</li>
</ol>
<h1 id="Spring-AOP介绍"><a href="#Spring-AOP介绍" class="headerlink" title="Spring AOP介绍"></a>Spring AOP介绍</h1><h3 id="层级代码结构"><a href="#层级代码结构" class="headerlink" title="层级代码结构"></a>层级代码结构</h3><p><img src="https://s2.loli.net/2022/03/12/iPAElyj2VhaMvWk.png" alt="image-20220312152942187"></p>
<h4 id="UserService类："><a href="#UserService类：" class="headerlink" title="UserService类："></a>UserService类：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.service;</span><br><span class="line"></span><br><span class="line">public interface UserService &#123;</span><br><span class="line">    public void addUser();</span><br><span class="line">    public String findUser(String name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="UserServiceImpl类"><a href="#UserServiceImpl类" class="headerlink" title="UserServiceImpl类:"></a>UserServiceImpl类:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.service;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.jt.anno.Lyj;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class UserServiceImpl implements UserService&#123;</span><br><span class="line">    @Override</span><br><span class="line">    @Lyj(name = &quot;add&quot;)</span><br><span class="line">    public void addUser() &#123;</span><br><span class="line">        //int i = 1/0;</span><br><span class="line">        System.out.println(&quot;添加用户&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Lyj(name = &quot;update&quot;)</span><br><span class="line">    public String findUser(String name)&#123;</span><br><span class="line">        System.out.println(&quot;发现用户:&quot;+name);</span><br><span class="line">        return name+&quot;我是返回值&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Config类"><a href="#Config类" class="headerlink" title="Config类"></a>Config类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.springframework.context.annotation.ComponentScan;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">@ComponentScan(&quot;com.jt&quot;)</span><br><span class="line">@EnableAspectJAutoProxy//(proxyTargetClass = true)//开启切面配置类注解</span><br><span class="line">public class Config &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="注解Lyj"><a href="#注解Lyj" class="headerlink" title="注解Lyj"></a>注解Lyj</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.anno;</span><br><span class="line"></span><br><span class="line">import java.lang.annotation.ElementType;</span><br><span class="line">import java.lang.annotation.Retention;</span><br><span class="line">import java.lang.annotation.RetentionPolicy;</span><br><span class="line">import java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line">@Retention(RetentionPolicy.RUNTIME) //注解运行期有效</span><br><span class="line">@Target(ElementType.METHOD)         //注解标识 方法</span><br><span class="line">public @interface Lyj &#123;</span><br><span class="line">    String name();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="切面代理类SpringAOP："><a href="#切面代理类SpringAOP：" class="headerlink" title="切面代理类SpringAOP："></a>切面代理类SpringAOP：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.apo;</span><br><span class="line"></span><br><span class="line">import org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">import org.aspectj.lang.annotation.*;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line"></span><br><span class="line">@Aspect//添加切面类注解</span><br><span class="line">//@Component</span><br><span class="line">public class SpringAOP &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 知识回顾: AOP利用动态代理扩展目标方法.</span><br><span class="line">     * 公式:    切面 = 切入点表达式 + 通知方法</span><br><span class="line">     * 切入点表达式: 如果目标对象满足切入点表达式的判断(if),</span><br><span class="line">     *             则spring自动为其创建代理对象</span><br><span class="line">     * 通知方法:  对目标方法进行扩展的封装方法.</span><br><span class="line">     * 目标对象的bean的ID: userServiceImpl</span><br><span class="line">     * 切入点表达式:</span><br><span class="line">     *      1. bean(&quot;bean的ID&quot;)</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    //@Pointcut(&quot;bean(userServiceImpl)&quot;) 整个类的方法</span><br><span class="line">    //@Pointcut(&quot;within(com.*.service..*)&quot;) 整个service包下类的方法</span><br><span class="line">    //@Pointcut(&quot;execution(* com.jt.service.UserServiceImpl.addUser())&quot;) 无参的addUser()方法</span><br><span class="line">    //@Pointcut(&quot;execution(* com.jt.service..*.add*(..))&quot;) 整个类下面的add参数名方法</span><br><span class="line">    @Pointcut(&quot;@annotation(com.jt.anno.Lyj)&quot;)//Lyi注解标记的方法</span><br><span class="line">    public void pointcut()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    //前置通知:再目标方法执行之前执行</span><br><span class="line">    @Before(&quot;pointcut()&quot;)</span><br><span class="line">    public void before()&#123;</span><br><span class="line">        //System.out.println(this.getClass());</span><br><span class="line">       // System.out.println(&quot;我是前置通知!!!!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @AfterThrowing(value = &quot;pointcut()&quot;,throwing = &quot;exception&quot;)</span><br><span class="line">    public void afterThrowing(Exception exception)&#123;</span><br><span class="line">        System.out.println(&quot;我是异常通知！！！！&quot;);</span><br><span class="line">        System.out.println(&quot;获取异常信息:&quot;+exception.getMessage());</span><br><span class="line">        exception.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //2.后置通知: 在目标方法执行之后执行</span><br><span class="line">    // 通过returning = &quot;result&quot;属性,获取目标方法的返回值,当作参数传递给result</span><br><span class="line">    @AfterReturning(value = &quot;pointcut()&quot;,returning = &quot;result&quot;)</span><br><span class="line">    public void afterReturning(Object result)&#123;</span><br><span class="line">        System.out.println(&quot;最终通知都要执行&quot;);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Around(&quot;pointcut()&quot;)</span><br><span class="line">    public Object around(ProceedingJoinPoint joinPoint) throws Throwable&#123;</span><br><span class="line">        System.out.println(&quot;环绕通知执行前&quot;);</span><br><span class="line">        Class targetClass = joinPoint.getTarget().getClass();</span><br><span class="line">        String methodName = joinPoint.getSignature().getName();</span><br><span class="line">        String className = joinPoint.getSignature().getDeclaringTypeName();</span><br><span class="line">        Object[] objs = joinPoint.getArgs();</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;类型:&quot;+targetClass);</span><br><span class="line">        System.out.println(&quot;方法名称:&quot;+methodName);</span><br><span class="line">        System.out.println(&quot;类名称:&quot;+className);</span><br><span class="line">        System.out.println(&quot;方法中携带的参数:&quot;+ Arrays.toString(objs));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Object result = joinPoint.proceed();</span><br><span class="line">        System.out.println(&quot;环绕通知执行后&quot;);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SpringAOP1类"><a href="#SpringAOP1类" class="headerlink" title="SpringAOP1类"></a>SpringAOP1类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.apo;</span><br><span class="line"></span><br><span class="line">import com.jt.anno.Lyj;</span><br><span class="line">import org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">import org.aspectj.lang.annotation.Around;</span><br><span class="line">import org.aspectj.lang.annotation.Aspect;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import javax.annotation.PostConstruct;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@Aspect</span><br><span class="line">@Component</span><br><span class="line">public class SpringAOP1 &#123;</span><br><span class="line">    private List list = new ArrayList();</span><br><span class="line"></span><br><span class="line">    @PostConstruct</span><br><span class="line">    public void init()&#123;</span><br><span class="line">        list.add(&quot;add&quot;);</span><br><span class="line">        list.add(&quot;update&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Around(&quot;@annotation(lyj)&quot;)</span><br><span class="line">    public Object around(ProceedingJoinPoint joinPoint, Lyj lyj) throws Throwable &#123;</span><br><span class="line">        String name = lyj.name();</span><br><span class="line">        if(list.contains(name))&#123;</span><br><span class="line">            System.out.println(&quot;方法增强&quot;);</span><br><span class="line">            Object proceed = joinPoint.proceed();</span><br><span class="line">            return proceed;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            System.out.println(&quot;不匹配&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="测试类编写"><a href="#测试类编写" class="headerlink" title="测试类编写"></a>测试类编写</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.springdemo9_aop;</span><br><span class="line"></span><br><span class="line">import com.jt.config.Config;</span><br><span class="line"></span><br><span class="line">import com.jt.service.UserService;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.springframework.context.ApplicationContext;</span><br><span class="line">import org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line">class Springdemo9AopApplicationTests &#123;</span><br><span class="line">    @Test</span><br><span class="line">    void contextLoads() &#123;</span><br><span class="line">        ApplicationContext context = new AnnotationConfigApplicationContext(Config.class);</span><br><span class="line">        UserService userService = context.getBean(UserService.class);</span><br><span class="line">        //userService.addUser();</span><br><span class="line"></span><br><span class="line">        userService.addUser();</span><br><span class="line">        userService.findUser(&quot;用户1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="XML文件配置"><a href="#XML文件配置" class="headerlink" title="XML文件配置"></a>XML文件配置</h3><p><strong>PersonServiceBean</strong>类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package test.spring.service.impl;  </span><br><span class="line">  </span><br><span class="line">import test.spring.service.PersonService;  </span><br><span class="line">  </span><br><span class="line">//代理对象实现目标对象所有接口  </span><br><span class="line">public class PersonServiceBean implements PersonService &#123;  </span><br><span class="line">  </span><br><span class="line">    public PersonServiceBean() &#123;  </span><br><span class="line">  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    @Override  </span><br><span class="line">    public void save(String name) &#123;  </span><br><span class="line">        System.out.println(&quot;save()-&gt;&gt;&quot; + name);  </span><br><span class="line">        throw new RuntimeException(&quot;&gt;&gt;----自定义异常----&lt;&lt;&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    @Override  </span><br><span class="line">    public String getResult() &#123;  </span><br><span class="line">        return &quot;getResult()==&gt;&gt;返回结果&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p><strong>MyInterceptor2</strong>类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package test.spring.aop;  </span><br><span class="line">  </span><br><span class="line">import org.aspectj.lang.ProceedingJoinPoint;  </span><br><span class="line">  </span><br><span class="line">public class MyInterceptor2 &#123;  </span><br><span class="line">  </span><br><span class="line">    public void doAccessCheck() &#123;  </span><br><span class="line">        System.out.println(&quot;前置通知--&gt;&gt;&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    public void doAfterReturning() &#123;  </span><br><span class="line">        System.out.println(&quot;后置通知--&gt;&gt;&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    public void doAfter() &#123;  </span><br><span class="line">        System.out.println(&quot;最终通知&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    public void doAfterThrowing() &#123;  </span><br><span class="line">        System.out.println(&quot;异常通知--&gt;&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    public Object doAround(ProceedingJoinPoint pJoinPoint) throws Throwable &#123;  </span><br><span class="line">        System.out.println(&quot;环绕通知&quot;);  </span><br><span class="line">        // 这里如果pJoinPoint.proceed()不执行，后面拦截到的方法都不会执行，非常适用于权限管理  </span><br><span class="line">        Object result = pJoinPoint.proceed();  </span><br><span class="line">        System.out.println(&quot;退出&quot;);  </span><br><span class="line">        return result;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p><strong>AOPTest3</strong>类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package test.spring.junit;  </span><br><span class="line">  </span><br><span class="line">import org.junit.Test;  </span><br><span class="line">import org.springframework.context.support.AbstractApplicationContext;  </span><br><span class="line">import org.springframework.context.support.ClassPathXmlApplicationContext;  </span><br><span class="line">  </span><br><span class="line">import test.spring.service.PersonService;  </span><br><span class="line">  </span><br><span class="line">public class AOPTest3 &#123;  </span><br><span class="line">  </span><br><span class="line">    @Test  </span><br><span class="line">    public void test() &#123;  </span><br><span class="line">        AbstractApplicationContext aContext = //  </span><br><span class="line">        new ClassPathXmlApplicationContext(&quot;beans2.xml&quot;);  </span><br><span class="line">        PersonService pService = (PersonService) aContext  </span><br><span class="line">                .getBean(&quot;personService&quot;);  </span><br><span class="line">        pService.save(&quot;LinDL&quot;);  </span><br><span class="line">        pService.getResult();  </span><br><span class="line">        aContext.close();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="beans2-xml配置文件"><a href="#beans2-xml配置文件" class="headerlink" title="beans2.xml配置文件"></a>beans2.xml配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span><br><span class="line">           http://www.springframework.org/schema/context</span><br><span class="line">           http://www.springframework.org/schema/context/spring-context-2.5.xsd</span><br><span class="line">           http://www.springframework.org/schema/aop </span><br><span class="line">           http://www.springframework.org/schema/aop/spring-aop-2.5.xsd&quot;&gt;</span><br><span class="line">     &lt;aop:aspectj-autoproxy /&gt;</span><br><span class="line">    &lt;bean id=&quot;personService&quot; class=&quot;test.spring.service.impl.PersonServiceBean&quot;&gt;&lt;/bean&gt;</span><br><span class="line">    &lt;bean id=&quot;myInterceptor&quot; class=&quot;test.spring.aop.MyInterceptor2&quot;&gt;&lt;/bean&gt;</span><br><span class="line">    &lt;aop:config&gt;</span><br><span class="line">           &lt;aop:aspect id=&quot;myAspect&quot; ref=&quot;myInterceptor&quot;&gt;</span><br><span class="line">                    &lt;aop:pointcut  id=&quot;myPointCut&quot;  expression=&quot;execution(* test.spring.service.impl.PersonServiceBean.*(..))&quot; /&gt;</span><br><span class="line">                    &lt;aop:before pointcut-ref=&quot;myPointCut&quot; method=&quot;doAccessCheck&quot; /&gt;</span><br><span class="line">                    &lt;aop:after-returning pointcut-ref=&quot;myPointCut&quot;  method=&quot;doAfterReturning&quot; /&gt;</span><br><span class="line">                    &lt;aop:after-throwing pointcut-ref=&quot;myPointCut&quot;  method=&quot;doAfterThrowing&quot; /&gt;</span><br><span class="line">                    &lt;aop:around pointcut-ref=&quot;myPointCut&quot; method=&quot;doAround&quot; /&gt;</span><br><span class="line">                    &lt;aop:after pointcut-ref=&quot;myPointCut&quot; method=&quot;doAfter&quot; /&gt;</span><br><span class="line">           &lt;/aop:aspect&gt;</span><br><span class="line">    &lt;/aop:config&gt;</span><br><span class="line">&lt;/beans&gt; </span><br></pre></td></tr></table></figure>

<p>切面的切入点语法定义</p>
<ul>
<li><strong>拦截test.spring.service.impl.PersonServiceBean下的所有方法<br>expression=”execution(* test.spring.service.impl.PersonServiceBean.*(..))”</strong></li>
<li>**拦截test.spring.service.impl子包下的所有类的所有方法<br>expression=”execution(* test.spring.service.impl..*.*(..))”<br>**</li>
<li>**拦截test.spring.service.impl.PersonServiceBean下的所有返回值为String类型的方法<br>expression=”execution(java.lang.String test.spring.service.impl.PersonServiceBean.*(..))”<br>**</li>
<li><strong>拦截test.spring.service.impl.PersonServiceBean下的所有方法中第一个参数类型为String的方法<br>expression=”execution(* test.spring.service.impl.PersonServiceBean.*(java.lang.String,..))”</strong></li>
</ul>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title="0" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                        
                            <li title="1" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link"
		data-enable="false"
        data-ae="false"
        data-ci=""
        data-cs=""
        data-r=""
        data-o=""
        data-a=""
        data-d="false"
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
